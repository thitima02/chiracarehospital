<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <title>โรงพยาบาลค่ายจิรประวัติ</title>
    <link rel="stylesheet" href="../../styles.css">
    <link rel="stylesheet" href="../../css/sidebar.css">
    <link rel="stylesheet" href="../../css/topbar.css">
    <link rel="stylesheet" href="../../css/moreinfo2.css">
    <link rel="stylesheet" href="../../frontend/opdpage/css/filltermenu.css">
    <link rel="stylesheet" href="../../frontend/opdpage/css/logo.css">
    <link rel="stylesheet" href="../../frontend/opdpage/css/moredetail.css">
    <link rel="stylesheet" href="../../frontend/opdpage/css/result.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Import icon -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <script src="../method/logout.js"></script>
    <!-- เชื่อมโยงไฟล์ JavaScript สำหรับจัดการการออกจากระบบ -->
    <script src="../method/user.js"></script>
    <!-- เชื่อมโยงไฟล์ JavaScript สำหรับการจัดการข้อมูลผู้ใช้ -->
    <script src="../method/loadSidebarScript.js"></script>
    <!-- เชื่อมโยงไฟล์ JavaScript สำหรับโหลดสคริปต์ sidebar -->
    <script src="../method/checkAuth.js"></script>
    <!-- เชื่อมโยงไฟล์ JavaScript สำหรับตรวจสอบการพิสูจน์ตัวตน (Authentication) -->
</head>

<body style="background-color:#edeff1;">

    <!-- Sidebar will be loaded here -->
    <div id="sidebar-container"></div>

    <!-- Topbar will be loaded here -->
    <div id="topbar-container"></div>

    <!-- Filters -->
    <div id="main">
        <div class="header">
            <div class="back-button">
                <button onclick="window.history.back()">
                    <i class="fas fa-arrow-left"></i> ย้อนกลับ
                </button>
            </div>
            <div class="patient-profile">
                <img src="../../assets/images/cat.jpg" alt="โปรไฟล์" class="profile-img">
                <div>
                    <h2 id="fullName">ไม่มีข้อมูล</h2>
                </div>
            </div>
        </div>
        </section>

        <div class="history-container">
            <!-- ข้อมูลประวัติการรักษาจะถูกเพิ่มที่นี่โดย JavaScript -->
        </div>


        <script>
            // เรียกฟังก์ชัน checkAuth() เพื่อตรวจสอบ token
            checkAuth();

            // Load sidebar
            fetch('sidebar.html')
                // ใช้ fetch เพื่อดึงข้อมูล sidebar.html
                .then(response => response.text())
                // แปลงข้อมูลที่ได้รับเป็นข้อความ
                .then(data => {
                    document.getElementById('sidebar-container').innerHTML = data;
                    // นำข้อมูลที่ดึงมาแสดงใน sidebar-container
                    loadSidebarScript();
                    // เรียกฟังก์ชัน loadSidebarScript() เพื่อทำงานเพิ่มเติมกับ sidebar
                });

            // Load topbar and set the page title
            fetch('topbar.html')
                // ใช้ fetch เพื่อดึงข้อมูล topbar.html
                .then(response => response.text())
                // แปลงข้อมูลที่ได้รับเป็นข้อความ
                .then(data => {
                    document.getElementById('topbar-container').innerHTML = data;
                    // นำข้อมูลที่ดึงมาแสดงใน topbar-container
                    document.getElementById('page-title').textContent = 'ประวัติการนัดรักษา';
                    // กำหนดชื่อเรื่องของหน้าเป็น 'หน้าหลัก'

                    // Re-run user.js script after loading topbar
                    const script = document.createElement('script');
                    // สร้างแท็ก script ใหม่
                    script.src = '../method/user.js';
                    // กำหนดแหล่งที่มาของ script เป็น user.js
                    document.body.appendChild(script);
                    // เพิ่มแท็ก script ลงใน body ของเอกสารเพื่อทำการโหลดสคริปต์
                });
        </script>
    </div>
</body>

</html>