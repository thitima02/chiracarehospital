<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Patient Information</title> 
        <link rel="stylesheet" href="../../css/addinfo3.css">
        <link rel="stylesheet" href="../../styles.css">
        <link rel="stylesheet" href="../../css/sidebar.css">
        <link rel="stylesheet" href="../../css/topbar.css">
        <link rel="stylesheet" href="../../css/logo.css">
        <!-- Import icon -->
        <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body style="background-color:#edeff1;">
        <!-- Sidebar will be loaded here -->
      <div id="sidebar-container"></div>
    
      <!-- Topbar will be loaded here -->
      <div id="topbar-container"></div>

      <div class="container">
        <div class="step-indicator">
            <div class="step ">1 ข้อมูลส่วนตัว</div>
            <div class="step ">2 ข้อมูลที่อยู่</div>
            <div class="step active">3 ข้อมูลทางการแพทย์</div>
        </div>
        <form class="addinfo" id="patientForm" enctype="multipart/form-data">
            <h2>ข้อมูลทางการแพทย์</h2>
            
            <div class="form-group">
              <label for="patient-group">กลุ่มผู้ป่วย</label>
              <select id="patient-group" name="patient-group" required>
                <option value="">กรุณาเลือกกลุ่มผู้ป่วย</option>
              </select>

              <label for="patient-type">ประเภทผู้ป่วย</label>
              <select id="patient-type" name="patient-type" required>
                <option value="">กรุณาเลือกประเภทผู้ป่วย</option>
              </select>

              <label for="disease-type">ประเภทโรค</label>
              <select id="disease-type" name="disease-type" required>
                <option value="">กรุณาเลือกประเภทโรค</option>
              </select>

              <label for="current-status">สถานะปัจจุบัน</label>
              <select id="current-status" name="current-status" required>
                <option value="">กรุณาเลือกสถานะ</option>
              </select>
              
              <label for="additional-info">เพิ่มเติม</label>
              <input type="text" id="additional-info" name="additional-info" placeholder=" *ตัวอย่างเช่น แพ้ยา *" required>              
        
                <div class="button">
                    <button type="submit" class="btn back" id="backBtn">ย้อนกลับ</button>
                    <button type="submit" class="btn save" id="saveBtn">บันทึก</button>
                </div>
            </div>
        </form>
      </div>
      <script>
          // Load sidebar
     fetch('sidebar.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('sidebar-container').innerHTML = data;
        loadSidebarScript(); // Initialize sidebar toggle after loading
      });

    // Load topbar and set the page title
    fetch('topbar.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('topbar-container').innerHTML = data;
        document.getElementById('page-title').textContent = 'แก้ไขข้อมูลผู้ป่วย'; // Set page title for the history page
      });

      function loadSidebarScript() {
      let sidebar = document.querySelector(".sidebar");
      let closeBtn = document.querySelector("#btn");

      closeBtn.addEventListener("click", () => {
        sidebar.classList.toggle("open");
        menuBtnChange();
      });
      function menuBtnChange() {
        if (sidebar.classList.contains("open")) {
          closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");
        } else {
          closeBtn.classList.replace("bx-menu-alt-right", "bx-menu");
        }
      }
    }
      // ฟังก์ชันสำหรับปุ่มย้อนกลับ
      document.getElementById('backBtn').addEventListener('click', function() {
            window.location.href = 'editaddinfo2.html';
        });

        // เมื่อผู้ใช้กดปุ่มบันทึก จะเปลี่ยนเส้นทางไปที่หน้า patient-info.html
        document.getElementById('saveBtn').addEventListener('click', function(event) {
        event.preventDefault(); // ป้องกันการส่งฟอร์ม
        alert('บันทึกข้อมูลสำเร็จ!'); // แสดงข้อความเพื่อให้แน่ใจว่าโค้ดทำงาน
        window.location.href = 'patient-info.html'; // ระบุเส้นทางที่ถูกต้อง
        });
      </script>
    </body>
</html>